---
import { type CollectionEntry, getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
	const projects = await getCollection('projects');
	return projects.map((project) => ({
		params: { slug: project.slug },
		props: project,
	}));
}
type Props = CollectionEntry<'projects'>;

const project = Astro.props;
const { Content } = await project.render();
---

<Layout title={`${project.data.title} | Projects`} description={project.data.description}>
	<article class="prose prose-lg dark:prose-invert mx-auto">
		<div class="mb-10">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6">
                <h1 class="text-4xl font-bold tracking-tight sm:text-5xl !mb-0">{project.data.title}</h1>
                <div class="flex gap-4">
                    {project.data.link && (
                        <a href={project.data.link} target="_blank" rel="noopener noreferrer" class="no-underline px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors">
                            在线演示
                        </a>
                    )}
                    {project.data.repo && (
                        <a href={project.data.repo} target="_blank" rel="noopener noreferrer" class="no-underline px-4 py-2 border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg text-sm font-medium transition-colors">
                            代码仓库
                        </a>
                    )}
                </div>
            </div>

            {project.data.tags && (
                <div class="flex gap-2 mb-6">
                    {project.data.tags.map((tag) => (
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300">
                            {tag}
                        </span>
                    ))}
                </div>
            )}
            
			<p class="text-xl text-gray-600 dark:text-gray-400 leading-relaxed">
				{project.data.description}
			</p>
		</div>

        <!-- MDX Content -->
		<div class="mt-10">
			<Content />
		</div>
	</article>
</Layout>
